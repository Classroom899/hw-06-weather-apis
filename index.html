<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather APIs</title>
</head>
<!--Create weather dashboard that will run in the broser and feature dynamically updated HTML and CSS-->

<body>
    <!--Select Box-->
    <form id="weather-location-form">

        <!--Need a label for the text box-->
        <label for="city-input">Location</label>

        <!--For our text input box-->
        <input type="text" id="weather-input">

        <!--Add a submit button-->
        <button id="submitButton" type="submit" value="submitInput">Submit</button>
    </form>

</body>


<!-- <script>
    function searchCurrentWeather(city) {
        var queryURL = "";
        $.ajax({
            url: queryURL,
            method: "GET"
        }).then(function (response) {

        },

            console.log(response))


</script> -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $("#submitButton").click(function (event) {
            event.preventDefault()
            const CITY = document.getElementById("weather-input").value
            console.log(CITY);

            var APIKey = "d74fd1c79edbaf5fb5a9f820bf9acc60";
            var query = `https://api.openweathermap.org/data/2.5/weather?q=${CITY}&appid=${APIKey}`

            $.ajax({
                url: query,
                method: "GET",




            }).then(function (currentWeather) {
                console.log(currentWeather);
            })







        }

        )




        // Here we are building the URL we need to query the database
        var queryURL = "https://api.openweathermap.org/data/2.5/weather?" +
            "q =" + document.getElementById("#city-input") + "&appid=" + "d74fd1c79edbaf5fb5a9f820bf9acc60"; //Change the city structure here and find a way to access just the weather for each city

        // Here we run our AJAX call to the OpenWeatherMap API
        $.ajax({
            url: queryURL,
            method: "GET",

            then: function (data) {
                $.each(data.weather, function (index, val) {
                    var weatherForecast = "";
                    $.each(data.weather, function (index, val) {
                        weatherForecast += "<p><br>" + data.name + "</b><img src=" + val.icon + " .png ></p >" +
                            data.main.temp + "&deg;F " + " | " + val.main + ", " +
                            val.description
                    });
                    $("#displayWeatherForecast").html(weatherForecast);
                });
            }

            // // We store all of the retrieved data inside of an object called "response"
            // .then(function (response) {

            //     // Log the queryURL
            //     console.log(response); // May have to create a loop for that array to create that information

            // });



        })

    });


</script>

</body>

</html>